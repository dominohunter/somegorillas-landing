{"version":3,"file":"index-BxT---nu.js","sources":["../../../src/smooth-scroll.js","../../../src/loader.js","../../../src/components/template-loader.js","../../../src/main-optimized.js"],"sourcesContent":["import Lenis from \"lenis\";\n\nexport const lenis = new Lenis({\n  autoRaf: true,\n});\n","import gsap from \"gsap\";\n\n// Register ScrambleText plugin (loaded via CDN in index.html)\ngsap.registerPlugin(window.ScrambleTextPlugin);\n\n// List of critical assets to preload (prioritize above-the-fold content)\nconst assetsToLoad = [\n  // Critical hero section assets\n  \"/backgrounds/Hero section.png\",\n  \"/nfts/hero-section/Goldie.webp\", // Center/main NFT\n  \"/Intersect.svg\",\n  \n  // Other hero section NFTs (WebP format)\n  \"/nfts/hero-section/Gangsta.webp\",\n  \"/nfts/hero-section/Zombie.webp\",\n  \"/nfts/hero-section/Wild One.webp\",\n  \"/nfts/hero-section/Lady.webp\",\n  \"/nfts/hero-section/Kiddo.webp\",\n  \"/nfts/hero-section/Sensei.webp\",\n  \"/nfts/hero-section/Nun.webp\",\n  \"/nfts/hero-section/Dude.webp\",\n  \n  // Section 2 backgrounds and assets\n  \"/backgrounds/Section 2.png\",\n  \"/nfts/section-2/Closed mouth.png\",\n  \"/nfts/section-2/Open Mouth.png\",\n  \n  // Other critical section backgrounds (loaded progressively)\n  \"/backgrounds/Section 3.png\",\n  \"/backgrounds/Section 4.png\",\n  \"/backgrounds/Section 5.png\",\n  \"/backgrounds/Section 6.png\",\n  \"/backgrounds/Section 7.png\",\n];\n\nexport function preloadAssets(onProgress, onComplete) {\n  let loadedCount = 0;\n  const totalAssets = assetsToLoad.length;\n\n  if (totalAssets === 0) {\n    onComplete();\n    return;\n  }\n\n  assetsToLoad.forEach((assetPath) => {\n    const img = new Image();\n\n    const handleLoad = () => {\n      loadedCount++;\n      const progress = (loadedCount / totalAssets) * 100;\n      onProgress(progress);\n\n      if (loadedCount === totalAssets) {\n        onComplete();\n      }\n    };\n\n    img.onload = handleLoad;\n    img.onerror = handleLoad; // Still count failed loads to prevent hanging\n    img.src = assetPath;\n  });\n}\n\nexport function createLoader() {\n  const loaderHTML = `\n    <div id=\"loader\" style=\"background-image: url('/backgrounds/Hero%20section.png'); background-size: cover; background-position: center; background-repeat: no-repeat;\" class=\"fixed inset-0 z-50 flex items-center justify-center overflow-hidden\" >\n      <div class=\"relative\">\n        <!-- SVG Loader with progress fill -->\n        <div class=\"fixed inset-0\">\n          <svg\n            class=\"w-full h-full\"\n            viewBox=\"0 0 400 400\"\n            preserveAspectRatio=\"xMidYMid slice\"\n          >\n            <defs>\n              <mask id=\"svgMask\">\n                <rect width=\"100%\" height=\"100%\" fill=\"black\" />\n                <image\n                  href=\"/loader-filled.svg\"\n                  width=\"400\"\n                  height=\"400\"\n                  x=\"0\"\n                  y=\"0\"\n                  fill=\"white\"\n                />\n              </mask>\n              <linearGradient\n                id=\"progressGradient\"\n                x1=\"0%\"\n                y1=\"0%\"\n                x2=\"0\"\n                y2=\"100%\"\n              >\n                <stop offset=\"0%\" style=\"stop-color: #ffee61\" />\n                <stop offset=\"100%\" style=\"stop-color: #ffce3c\" />\n              </linearGradient>\n            </defs>\n\n            <!-- Background SVG -->\n            <image\n              href=\"/loader-filled.svg\"\n              width=\"400\"\n              height=\"400\"\n              x=\"0\"\n              y=\"0\"\n              opacity=\"0.3\"\n            />\n\n            <!-- Progress fill -->\n            <rect\n              class=\"progress-fill\"\n              width=\"0\"\n              height=\"400\"\n              fill=\"url(#progressGradient)\"\n              mask=\"url(#svgMask)\"\n            />\n          </svg>\n        </div>\n\n        <!-- Loading text -->\n      </div>\n\n      <div class=\"text-scramble__content bg-white border-2 p-8 z-10 absolute w-[400px] flex justify-center items-center border-black bottom-4\">\n        <p id=\"status-text\" class=\"text-2xl font-bold text-black\">\n          initializing...\n        </p>\n      </div>\n\n      <!-- Background particles -->\n    </div>\n  `;\n\n  document.body.insertAdjacentHTML(\"afterbegin\", loaderHTML);\n\n  // Animate the loader\n  const tl = gsap.timeline();\n\n  // Start progress bar immediately\n  tl.to(\n    \".progress-fill\",\n    {\n      width: 400,\n      duration: 6, // Total loading duration\n      ease: \"power2.out\",\n    },\n    0, // Start at timeline beginning\n  )\n\n    // Status text updates\n    .to(\n      \"#status-text\",\n      {\n        scrambleText: {\n          text: \"loading assets...\",\n          chars: \"01\",\n          speed: 0.5,\n        },\n        duration: 1,\n      },\n      0.5,\n    )\n    .to(\n      \"#status-text\",\n      {\n        scrambleText: {\n          text: \"compiling scripts...\",\n          chars: \".JS\",\n          speed: 0.3,\n        },\n        duration: 1.2,\n      },\n      1.8,\n    )\n    .to(\n      \"#status-text\",\n      {\n        scrambleText: {\n          text: \"loading fonts...\",\n          chars: \"lowerCase\",\n          speed: 0.4,\n        },\n        duration: 1,\n      },\n      3.2,\n    )\n    .to(\n      \"#status-text\",\n      {\n        scrambleText: {\n          text: \"initializing components...\",\n          chars: \"upperCase\",\n          speed: 0.3,\n        },\n        duration: 1.3,\n      },\n      4.5,\n    )\n    .to(\n      \"#status-text\",\n      {\n        scrambleText: {\n          text: \"ready!\",\n          chars: \"!@#$%\",\n          speed: 0.2,\n        },\n        duration: 0.8,\n      },\n      5.8,\n    );\n\n  return tl;\n}\n\nexport function hideLoader() {\n  const loader = document.getElementById(\"loader\");\n  if (loader) {\n    return gsap.to(loader, {\n      opacity: 0,\n      scale: 0.8,\n      duration: 0.8,\n      ease: \"power2.inOut\",\n      onComplete: () => {\n        loader.remove();\n      },\n    });\n  }\n}\n","// Template loading utility\nexport async function loadTemplate(templatePath) {\n  try {\n    const response = await fetch(templatePath);\n    if (!response.ok) {\n      throw new Error(`Failed to load template: ${response.statusText}`);\n    }\n    return await response.text();\n  } catch (error) {\n    console.error('Template loading error:', error);\n    return null;\n  }\n}\n\n// Render template to DOM\nexport function renderTemplate(templateHTML, targetElement) {\n  if (!templateHTML || !targetElement) {\n    console.error('Invalid template or target element');\n    return false;\n  }\n  \n  targetElement.innerHTML = templateHTML;\n  return true;\n}\n\n// Initialize app with template\nexport async function initializeAppWithTemplate(targetSelector = '#app') {\n  const targetElement = document.querySelector(targetSelector);\n  if (!targetElement) {\n    console.error('Target element not found:', targetSelector);\n    return false;\n  }\n\n  const templateHTML = await loadTemplate('/src/templates/app-template.html');\n  if (templateHTML) {\n    return renderTemplate(templateHTML, targetElement);\n  }\n  \n  return false;\n}","import \"./style.css\";\nimport { lenis } from \"./smooth-scroll.js\";\nimport { createLoader, hideLoader, preloadAssets } from \"./loader.js\";\nimport { initializeAppWithTemplate } from \"./components/template-loader.js\";\nimport { setupMouthHover, setupFAQEventListeners, setupDraggableNFTs } from \"./components/interactions.js\";\nimport { setupTranslator } from \"./components/translator.js\";\n\n// Register service worker\nif (\"serviceWorker\" in navigator) {\n  navigator.serviceWorker.register(\"/sw.js\").catch(error => {\n    console.log(\"Service worker registration failed:\", error);\n  });\n}\n\n// Cache status check\nfunction checkCacheStatus() {\n  return caches\n    .match(\"/backgrounds/Hero%20section.png\")\n    .then((response) => !!response);\n}\n\n// Main initialization function\nasync function initApp() {\n  const isCached = await checkCacheStatus();\n\n  if (isCached) {\n    console.log(\"Assets cached, skipping loader\");\n    await initializeApp();\n  } else {\n    console.log(\"First visit, showing loader\");\n    runLoaderSequence();\n  }\n}\n\n// Loader sequence\nfunction runLoaderSequence() {\n  const loaderTimeline = createLoader();\n  let assetsLoaded = false;\n  let loaderComplete = false;\n\n  // Start preloading assets\n  preloadAssets(\n    (progress) => {\n      console.log(`Loading progress: ${progress}%`);\n    },\n    () => {\n      assetsLoaded = true;\n      checkAndInitialize();\n    },\n  );\n\n  // Wait for loader animation\n  loaderTimeline.eventCallback(\"onComplete\", () => {\n    loaderComplete = true;\n    checkAndInitialize();\n  });\n\n  function checkAndInitialize() {\n    if (assetsLoaded && loaderComplete) {\n      setTimeout(async () => {\n        hideLoader();\n        await initializeApp();\n      }, 300);\n    }\n  }\n}\n\n// Initialize the main application\nasync function initializeApp() {\n  // Start smooth scroll\n  lenis.start();\n\n  // Load and render template\n  const templateLoaded = await initializeAppWithTemplate(\"#app\");\n  \n  if (!templateLoaded) {\n    console.error(\"Failed to load app template\");\n    return;\n  }\n\n  // Initialize interactive components after template is loaded\n  setTimeout(() => {\n    setupMouthHover();\n    setupFAQEventListeners();\n    setupDraggableNFTs();\n    setupTranslator();\n  }, 100);\n\n  console.log(\"App initialization complete\");\n}\n\n// Start the application\ninitApp().catch(error => {\n  console.error(\"App initialization failed:\", error);\n});"],"names":["lenis","Lenis","gsap","assetsToLoad","preloadAssets","onProgress","onComplete","loadedCount","totalAssets","assetPath","img","handleLoad","progress","createLoader","tl","hideLoader","loader","loadTemplate","templatePath","response","error","renderTemplate","templateHTML","targetElement","initializeAppWithTemplate","targetSelector","checkCacheStatus","initApp","initializeApp","runLoaderSequence","loaderTimeline","assetsLoaded","loaderComplete","checkAndInitialize","setupMouthHover","setupFAQEventListeners","setupDraggableNFTs","setupTranslator"],"mappings":"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"}